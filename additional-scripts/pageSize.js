const PageSize={chatPageSizeLimits:{max:40,min:5},chatFontSizeLimits:{max:5,min:-3},chatPageSize:10,chatFontSize:0,applyPageAndFontSizes(){window.client.sendChatInput(`/fontsize ${this.chatFontSize}`),window.client.sendChatInput(`/pagesize ${this.chatPageSize}`),this.updateInputTop()},updateInputTop(){const t=document.querySelector(".radmir-chat");this.chatFontSize>=0?t.style.top=10+20*this.chatPageSize+10+this.chatFontSize*this.chatPageSize+"px":t.style.top=5+20*this.chatPageSize+10+this.chatFontSize*this.chatPageSize-this.chatPageSize+"px"},registerCommand(){jsLoader.chat.registerCommand("/pagesize",(t=>{+t[0]>this.chatPageSizeLimits.max||+t[0]<this.chatPageSizeLimits.min||(this.chatPageSize=+t[0],this.saveConfig(),this.updateInputTop())})),jsLoader.chat.registerCommand("/fontsize",(t=>{+t[0]>this.chatFontSizeLimits.max||+t[0]<this.chatFontSizeLimits.min||(this.chatFontSize=+t[0],this.saveConfig(),this.updateInputTop())}))},async loadConfig(){return new Promise((t=>{jsLoader.socket.sendEvent("readFile|chat.config.json",(({data:e})=>{console.log(e);const[i,a]=e.split("|");if("readFile"!==i)return;if(!a.length)return console.log("no data"),this.saveConfig(),void t();const n=JSON.parse(a);this.chatPageSize=n.chatPageSize,this.chatFontSize=n.chatFontSize,console.log("loaded",n),t()}))}))},saveConfig(){const t={chatPageSize:this.chatPageSize,chatFontSize:this.chatFontSize};jsLoader.socket.sendEvent(`writeFile|chat.config.json|${JSON.stringify(t,null,"  ")}`)},setStyles(){jsLoader.runtime.createStyleTag("#app .scrolling-container{display:none}#app .radmir-chat-input{margin-top:0}",document.head)},async init(){await this.loadConfig(),this.setStyles(),this.registerCommand(),this.applyPageAndFontSizes(),jsLoader.runtime.createStyleTag(".connect {\n      display: none !important;\n      }\n      \n      body .radmir-chat_opened:before {\n      opacity: 0;\n      }",document.head),jsLoader.showConnectedScript("info",atob("UGFnZSBTaXplIGZvciBPbmVhcyBTdHVkaW8="),"Загружен!")}};jsLoader.socket.sendEvent("existsFile|chat.asi",(({data:t})=>{const[e,i]=t.split("|");"existsFile"===e&&+i&&PageSize.init()}));